/*! JTaro.js v0.1.0 ~ (c) 2016 Author:BarZu Git:https://github.com/chjtx/JTaro */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.JTaro=e()}(this,function(){"use strict";function n(n,e){var i,t=Vue.options.components[n.jtaro_tag].options.beforeEnter;"function"==typeof t?(i=t.call(n,function(n){n===!1?v.go(-1):e()}),i===!0?e():i===!1&&v.go(-1)):e()}function e(e,i,t){function o(){v.sliding=!0,setTimeout(function(){a&&t.utils.moveTo(a,-u,0,300,function(){var n=a.previousElementSibling;n&&(n.style.display="none")}),t.utils.moveTo(i,0,0,300,function(){v.sliding=!1})},0)}var a=i.previousElementSibling;t.utils.moveTo(i,u,0),n(e,o)}function i(n,e,i){var t=n.nextElementSibling;v.sliding=!0,t&&e.utils.moveTo(t,u,0,300,i),e.utils.moveTo(n,0,0,300,function(){v.sliding=!1;var e=n.previousElementSibling;e&&(e.style.display="block")})}function t(n,e,o,a){var l=n.length;l-1>a&&i(e[l-2],o,function(){n.splice(l-1),e[l-1].parentNode.removeChild(e[l-1]),setTimeout(function(){t(n,e,o,a)},0)})}function o(n){var e=n.split("&"),i={};return e.forEach(function(n){var e=n.split("=");i[e[0]]=e[1]}),i}function a(n){for(var e=v.vm.$children,i=0,t=e.length;i<t;i++)if(e[i].jtaro_tag===n)return e[i]}function l(n,i){var l,r=n.replace("#!",""),s=r.split("?");r=s[0],s[1]&&(v.params=o(s[1]));var d=v.vm.$data.views,u=v.views.indexOf(r);u===-1?(d.indexOf(r)===-1?d.push(r):(l=a(r),v.vm.$el.appendChild(l.$el),e(l,l.$el,i)),v.views.push(r)):t(v.views,v.vm.$el.childNodes,i,u)}function r(){u=window.innerWidth}var s=document.getElementById("jtaro_style");s||(s=document.createElement("style"),s.id="jtaro_style",s.innerHTML="html,body{height:100%;padding:0;margin:0}#jtaro_app{position:relative;width:100%;height:100%;overflow:hidden}.jtaro-view{position:absolute;width:100%;height:100%;overflow:hidden;background:#fff}",document.head.appendChild(s));var d={template:'<div style="text-align:center;padding-top:100px">404 Page not found</div>'},u=window.innerWidth,v=Object.create(null);return v.params=null,v.views=[],v.version="0.1.0",v.install=function(n,i){var t={props:["view"],data:function(){return{jtaro_tag:this.view}},render:function(e){return e(n.options.components[this.view]||d)},mounted:function(){e(this,this.$el,i.jroll)}};n.component("jt-view",t),n.prototype.postMessage=function(e,i){var t=a(i),o=n.options.components[i],l=o?o.options.onMessage:null;t&&l&&l.call(t.$children[0],{message:e,origin:this.$parent.jtaro_tag})},v.vm=new n({el:i.el,data:{views:[]},template:'<div id="jtaro_app"><jt-view class="jtaro-view" v-for="view in views" :view="view"></jt-view></div>'}),window.addEventListener("hashchange",function(){l(window.location.hash,i.jroll)}),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),v.boot=function(n){var e=window.location.hash;""===e?window.location.hash=n?"!"+n:"!home":l(e,i.jroll)}},v.go=function(n,e){v.sliding||("string"==typeof n&&(window.location.hash="!"+n),"number"==typeof n&&window.history.go(n),e?v.params=e:v.params=null)},window.Vue&&window.JRoll&&window.Vue.use(v,{jroll:window.JRoll,el:"#jtaro_app"}),v});